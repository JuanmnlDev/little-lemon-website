import{r as c,c as d,d as j,e as v,f,b as N,j as e,g as S}from"./index-C3KObasD.js";import{M as y,I as w}from"./Main-B5LS8WXF.js";import{t as F}from"./tables-CI4XegLN.js";import"./axios-BDe-SwBN.js";const T=({id:t=null})=>{const[u,o]=c.useState(!1);d(j),d(v),d(f);const x=N(),[a,h]=c.useState({name:"",email:"",date:new Date().toISOString().split("T")[0],time:"",guests:"2",tableId:t!==null?t:1,occasion:"regular"}),[r,p]=c.useState({}),b=()=>{const s={};return a.name.trim()||(s.name="Name is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(s.email="Email is invalid"):s.email="Email is required",a.date||(s.date="Date is required"),a.time||(s.time="Time is required"),s},i=s=>{const{name:n,value:l}=s.target;h(m=>({...m,[n]:l}))},g=s=>{s.preventDefault();const n=b();if(Object.keys(n).length===0){const l=new FormData;l.append("day_time",`${a.date} ${a.time}`),l.append("table_id",a.tableId),l.append("guests",a.guests),l.append("occasion",a.occasion);{const m={email:a.email,guests:a.guests,occasion:a.occasion,dateTime:`${a.date} ${a.time}`,tableNumber:a.tableId};x(S(m)),o(!0),h({name:"",email:"",date:new Date().toISOString().split("T")[0],time:"",guests:"2",tableId:t!==null?t:1,occasion:"regular"})}}else p(n)};return e.jsx("div",{className:"booking-form-container",children:u?e.jsxs("div",{className:"success-message bg-green-100 p-4 rounded-md mt-4",children:[e.jsx("h2",{className:"text-green-900",children:"Thanks for your reservation"}),e.jsx("p",{className:"text-green-700",children:"You will receive an email with the details of your reservation."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Reserve a Table"}),e.jsxs("form",{onSubmit:g,noValidate:!0,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name:"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:i,"aria-label":"Full name","aria-required":"true","aria-invalid":!!r.name}),r.name&&e.jsx("span",{className:"error",role:"alert",children:r.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:i,"aria-label":"Email address","aria-required":"true","aria-invalid":!!r.email}),r.email&&e.jsx("span",{className:"error",role:"alert",children:r.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"date",children:"Date:"}),e.jsx("input",{type:"date",id:"date",name:"date",value:a.date,onChange:i,min:new Date().toISOString().split("T")[0],"aria-label":"Reservation date","aria-required":"true","aria-invalid":!!r.date}),r.date&&e.jsx("span",{className:"error",role:"alert",children:r.date})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"time",children:"Time:"}),e.jsx("input",{type:"time",id:"time",name:"time",defaultValue:a.time,onChange:i,"aria-label":"Reservation time","aria-required":"true","aria-invalid":!!r.time}),r.time&&e.jsx("span",{className:"error",role:"alert",children:r.time})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"table",children:"Table"}),e.jsx("select",{id:"table",name:"table",value:a.tableId,onChange:i,"aria-label":"Table id",children:F.tables.map(s=>e.jsx("option",{value:s.id,children:s.title},`table-${s.id}`))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"guests",children:"Number of Guests:"}),e.jsx("select",{id:"guests",name:"guests",value:a.guests,onChange:i,"aria-label":"Number of guests",children:[1,2,3,4,5,6,7,8].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"occasion",children:"Occasion:"}),e.jsxs("select",{id:"occasion",name:"occasion",value:a.occasion,onChange:i,"aria-label":"Occasion",children:[e.jsx("option",{value:"regular",children:"Regular"}),e.jsx("option",{value:"birthday",children:"Birthday"}),e.jsx("option",{value:"anniversary",children:"Anniversary"}),e.jsx("option",{value:"business",children:"Business"})]})]}),e.jsx("button",{type:"submit","aria-label":"Submit reservation",className:"btn btn-primary w-full font-bold text-lg",role:"button",children:"Reserve Table"})]})]})})},E=()=>{const t=window.location.search,o=new URLSearchParams(t).get("table_id");return e.jsx(y,{children:e.jsxs("div",{className:"container mx-auto","data-testid":"booking-page",children:[e.jsx("a",{href:"/our-tables",className:"p-2 ml-2 mt-4 bg-zinc-300 w-20 rounded-full flex justify-around",children:e.jsx(w,{className:"text-2xl"})}),e.jsx(T,{id:o})]})})};export{E as default};
